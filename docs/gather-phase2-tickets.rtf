{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Arial-BoldMT;\f1\fnil\fcharset0 HelveticaNeue;\f2\fswiss\fcharset0 ArialMT;
\f3\froman\fcharset0 TimesNewRomanPSMT;\f4\fswiss\fcharset0 Helvetica;\f5\fmodern\fcharset0 CourierNewPSMT;
\f6\fswiss\fcharset0 Arial-ItalicMT;}
{\colortbl;\red255\green255\blue255;\red33\green47\blue63;\red0\green0\blue0;\red108\green121\blue122;
\red75\green90\blue107;\red255\green255\blue255;\red193\green193\blue193;\red246\green247\blue249;\red40\green56\blue75;
\red131\green148\blue149;}
{\*\expandedcolortbl;;\cssrgb\c17255\c24314\c31373;\cssrgb\c0\c0\c0;\cssrgb\c49804\c54902\c55294;
\cssrgb\c36471\c42745\c49412;\cssrgb\c100000\c100000\c100000;\cssrgb\c80000\c80000\c80000;\cssrgb\c97255\c97647\c98039;\cssrgb\c20392\c28627\c36863;
\cssrgb\c58431\c64706\c65098;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid301\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid4}
{\list\listtemplateid5\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid5}
{\list\listtemplateid6\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid501\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid6}
{\list\listtemplateid7\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid7}
{\list\listtemplateid8\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid701\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid8}
{\list\listtemplateid9\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid801\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid9}
{\list\listtemplateid10\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid901\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid10}
{\list\listtemplateid11\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1001\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid11}
{\list\listtemplateid12\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid12}
{\list\listtemplateid13\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid13}
{\list\listtemplateid14\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1301\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid14}
{\list\listtemplateid15\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid15}
{\list\listtemplateid16\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1501\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid16}
{\list\listtemplateid17\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid17}
{\list\listtemplateid18\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1701\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid18}
{\list\listtemplateid19\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1801\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid19}
{\list\listtemplateid20\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1901\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid20}
{\list\listtemplateid21\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2001\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid21}
{\list\listtemplateid22\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid22}
{\list\listtemplateid23\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid23}
{\list\listtemplateid24\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2301\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid24}
{\list\listtemplateid25\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid25}
{\list\listtemplateid26\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2501\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid26}
{\list\listtemplateid27\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid27}
{\list\listtemplateid28\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2701\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid28}
{\list\listtemplateid29\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2801\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid29}
{\list\listtemplateid30\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid2901\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid30}
{\list\listtemplateid31\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid3001\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid31}
{\list\listtemplateid32\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid3101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid32}
{\list\listtemplateid33\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid3201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid33}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}{\listoverride\listid5\listoverridecount0\ls5}{\listoverride\listid6\listoverridecount0\ls6}{\listoverride\listid7\listoverridecount0\ls7}{\listoverride\listid8\listoverridecount0\ls8}{\listoverride\listid9\listoverridecount0\ls9}{\listoverride\listid10\listoverridecount0\ls10}{\listoverride\listid11\listoverridecount0\ls11}{\listoverride\listid12\listoverridecount0\ls12}{\listoverride\listid13\listoverridecount0\ls13}{\listoverride\listid14\listoverridecount0\ls14}{\listoverride\listid15\listoverridecount0\ls15}{\listoverride\listid16\listoverridecount0\ls16}{\listoverride\listid17\listoverridecount0\ls17}{\listoverride\listid18\listoverridecount0\ls18}{\listoverride\listid19\listoverridecount0\ls19}{\listoverride\listid20\listoverridecount0\ls20}{\listoverride\listid21\listoverridecount0\ls21}{\listoverride\listid22\listoverridecount0\ls22}{\listoverride\listid23\listoverridecount0\ls23}{\listoverride\listid24\listoverridecount0\ls24}{\listoverride\listid25\listoverridecount0\ls25}{\listoverride\listid26\listoverridecount0\ls26}{\listoverride\listid27\listoverridecount0\ls27}{\listoverride\listid28\listoverridecount0\ls28}{\listoverride\listid29\listoverridecount0\ls29}{\listoverride\listid30\listoverridecount0\ls30}{\listoverride\listid31\listoverridecount0\ls31}{\listoverride\listid32\listoverridecount0\ls32}{\listoverride\listid33\listoverridecount0\ls33}}
\margl1440\margr1440
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\b\fs48 \cf2 \up0 \nosupersub \ulnone Gather Phase 2
\f1\b0\fs22 \cf3 \
\pard\pardeftab720\sa400\partightenfactor0

\f2\fs32 \cf4 Stripe + Entitlements \'97 Build Tickets
\f1\fs22 \cf3 \
\pard\sa400\partightenfactor0

\f0\b\fs32 \cf2 Overview\
\pard\sa400\partightenfactor0

\fs20 \cf3 Phase 2 introduces monetisation: Stripe subscriptions, billing states, and entitlement enforcement. This builds on Phase 1's user authentication to add payment capabilities. The implementation must preserve all existing functionality while adding revenue capture.
\fs32 \cf2 \
\pard\sa200\partightenfactor0

\fs22 \cf5 Architecture Recap
\fs32 \cf2 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls1\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Payer: Host (single billing relationship per account)
\f3 \
\ls1\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Billing object: Annual subscription
\f3 \
\ls1\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Value metric: Events per year (free: 1, paid: unlimited)
\f3 \
\ls1\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial: 14 days, starts on first event creation, requires phone verification
\f3 \
\ls1\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Grace period: 7 days for failed payments
\f3 \
\ls1\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Cancellation: Access until period end, then read-only
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Sequence
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f2 \cf3 Tickets are ordered by dependency. Complete each before starting the next.
\f3 \

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat2 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat2 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f0\b \cf6 #
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f0\b\fs20 \cf6 \up0 \nosupersub \ulnone Ticket
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f0\b\fs20 \cf6 \up0 \nosupersub \ulnone Depends On
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.1
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Subscription schema + billing states
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Phase 1
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth1020\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth2480\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.2
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Stripe integration + webhook handler
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.1
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.3
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Checkout + subscription creation
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.2
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.4
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Billing state sync + grace period
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.3
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.5
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Entitlement service
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.4
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.6
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Event creation gate
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.5
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth1020\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth2480\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.7
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Phone verification for trial
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.5
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.8
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Trial flow
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.6, 2.7
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.9
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Cancellation + downgrade handling
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.4
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.10
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Legacy event grandfathering
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.6
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth1020\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth2480\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.11
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Billing UI (manage subscription)
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.9
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth1020\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth2480\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 2.12
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Phase 2 validation
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone All above
\f4\fs24 \cf0 \up0 \nosupersub \ulnone 
\f3\fs20 \cf3 \up0 \nosupersub \ulnone \cell \lastrow\row
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.1 \'97 Subscription Schema + Billing States\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Schema migration
\fs26 \cf9 \

\fs20 \cf3 Risk: Low (additive only)
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 2 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Add the Subscription table and billing state enum to track user payment status. This is the foundation for all entitlement checks.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls2\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone BillingStatus enum: FREE, TRIALING, ACTIVE, PAST_DUE, CANCELED
\f3 \
\ls2\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Subscription table with Stripe IDs and status tracking
\f3 \
\ls2\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone User.billingStatus field (defaults to FREE)
\f3 \
\ls2\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Migration runs without affecting existing data
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Schema Definition
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 enum BillingStatus \{
\f3\fs20 \

\f5\fs18   FREE
\f3\fs20 \

\f5\fs18   TRIALING
\f3\fs20 \

\f5\fs18   ACTIVE
\f3\fs20 \

\f5\fs18   PAST_DUE
\f3\fs20 \

\f5\fs18   CANCELED
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\

\f5\fs18 model Subscription \{
\f3\fs20 \

\f5\fs18   id                    String        @id @default(cuid())
\f3\fs20 \

\f5\fs18   userId                String        @unique
\f3\fs20 \

\f5\fs18   user                  User          @relation(fields: [userId], references: [id])
\f3\fs20 \

\f5\fs18   stripeCustomerId      String        @unique
\f3\fs20 \

\f5\fs18   stripeSubscriptionId  String?       @unique
\f3\fs20 \

\f5\fs18   stripePriceId         String?
\f3\fs20 \

\f5\fs18   status                BillingStatus @default(FREE)
\f3\fs20 \

\f5\fs18   currentPeriodStart    DateTime?
\f3\fs20 \

\f5\fs18   currentPeriodEnd      DateTime?
\f3\fs20 \

\f5\fs18   cancelAtPeriodEnd     Boolean       @default(false)
\f3\fs20 \

\f5\fs18   trialStart            DateTime?
\f3\fs20 \

\f5\fs18   trialEnd              DateTime?
\f3\fs20 \

\f5\fs18   createdAt             DateTime      @default(now())
\f3\fs20 \

\f5\fs18   updatedAt             DateTime      @updatedAt
\f3\fs20 \
\

\f5\fs18   @@index([stripeCustomerId])
\f3\fs20 \

\f5\fs18   @@index([stripeSubscriptionId])
\f3\fs20 \

\f5\fs18   @@index([status])
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\

\f5\fs18 // Add to User model:
\f3\fs20 \

\f5\fs18 model User \{
\f3\fs20 \

\f5\fs18   // ... existing fields
\f3\fs20 \

\f5\fs18   billingStatus  BillingStatus  @default(FREE)
\f3\fs20 \

\f5\fs18   subscription   Subscription?
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls3\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Migration runs successfully
\f3 \
\ls3\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Existing users have billingStatus = FREE
\f3 \
\ls3\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Subscription table exists (empty)
\f3 \
\ls3\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone All Phase 1 flows still work
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.2 \'97 Stripe Integration + Webhook Handler\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Infrastructure
\fs26 \cf9 \

\fs20 \cf3 Risk: Medium (external dependency)
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 3-4 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Set up Stripe SDK, configure products/prices, and create the webhook endpoint that will be the source of truth for subscription state.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls4\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Stripe SDK installed (npm install stripe)
\f3 \
\ls4\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Environment variables: STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET, STRIPE_PRICE_ID
\f3 \
\ls4\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Stripe client wrapper at src/lib/stripe.ts
\f3 \
\ls4\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Webhook endpoint at POST /api/webhooks/stripe
\f3 \
\ls4\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Webhook handles: customer.subscription.created, updated, deleted
\f3 \
\ls4\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Webhook handles: invoice.paid, invoice.payment_failed
\f3 \
\ls4\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Webhook signature verification
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Stripe Setup (Manual)
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f2 \cf3 Before implementing, create in Stripe Dashboard:
\f3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls5\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Product: 'Gather Annual' (or your product name)
\f3 \
\ls5\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Price: Annual recurring (e.g., $49/year)
\f3 \
\ls5\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Webhook endpoint pointing to your domain/api/webhooks/stripe
\f3 \
\ls5\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Webhook events: customer.subscription.*, invoice.*
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Implementation
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // src/lib/stripe.ts
\f3\fs20 \

\f5\fs18 import Stripe from 'stripe';
\f3\fs20 \
\

\f5\fs18 export const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, \{
\f3\fs20 \

\f5\fs18   apiVersion: '2023-10-16',
\f3\fs20 \

\f5\fs18 \});
\f3\fs20 \
\

\f5\fs18 // src/app/api/webhooks/stripe/route.ts
\f3\fs20 \

\f5\fs18 import \{ stripe \} from '@/lib/stripe';
\f3\fs20 \

\f5\fs18 import \{ headers \} from 'next/headers';
\f3\fs20 \
\

\f5\fs18 export async function POST(req: Request) \{
\f3\fs20 \

\f5\fs18   const body = await req.text();
\f3\fs20 \

\f5\fs18   const signature = headers().get('stripe-signature')!;
\f3\fs20 \
\

\f5\fs18   let event: Stripe.Event;
\f3\fs20 \

\f5\fs18   try \{
\f3\fs20 \

\f5\fs18     event = stripe.webhooks.constructEvent(
\f3\fs20 \

\f5\fs18       body,
\f3\fs20 \

\f5\fs18       signature,
\f3\fs20 \

\f5\fs18       process.env.STRIPE_WEBHOOK_SECRET!
\f3\fs20 \

\f5\fs18     );
\f3\fs20 \

\f5\fs18   \} catch (err) \{
\f3\fs20 \

\f5\fs18     return new Response('Webhook signature verification failed', \{ status: 400 \});
\f3\fs20 \

\f5\fs18   \}
\f3\fs20 \
\

\f5\fs18   // Handle events (implemented in 2.4)
\f3\fs20 \

\f5\fs18   switch (event.type) \{
\f3\fs20 \

\f5\fs18     case 'customer.subscription.created':
\f3\fs20 \

\f5\fs18     case 'customer.subscription.updated':
\f3\fs20 \

\f5\fs18     case 'customer.subscription.deleted':
\f3\fs20 \

\f5\fs18     case 'invoice.paid':
\f3\fs20 \

\f5\fs18     case 'invoice.payment_failed':
\f3\fs20 \

\f5\fs18       // TODO: Implement in 2.4
\f3\fs20 \

\f5\fs18       break;
\f3\fs20 \

\f5\fs18   \}
\f3\fs20 \
\

\f5\fs18   return new Response('OK', \{ status: 200 \});
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Environment Variables
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 STRIPE_SECRET_KEY=sk_test_...
\f3\fs20 \

\f5\fs18 STRIPE_WEBHOOK_SECRET=whsec_...
\f3\fs20 \

\f5\fs18 STRIPE_PRICE_ID=price_...
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls6\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Stripe CLI: stripe listen --forward-to localhost:3000/api/webhooks/stripe
\f3 \
\ls6\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trigger test event: stripe trigger customer.subscription.created
\f3 \
\ls6\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Webhook receives event and returns 200
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.3 \'97 Checkout + Subscription Creation\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: API + UI
\fs26 \cf9 \

\fs20 \cf3 Risk: Medium
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 3-4 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Create the checkout flow that takes a user from free to paid. Uses Stripe Checkout for PCI compliance \'97 we never handle card details directly.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls7\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone POST /api/billing/checkout creates Stripe Checkout session
\f3 \
\ls7\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Checkout session includes user email and metadata
\f3 \
\ls7\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Success URL: /billing/success
\f3 \
\ls7\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Cancel URL: /billing/cancel
\f3 \
\ls7\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Stripe Customer created if not exists
\f3 \
\ls7\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Subscription record created/updated on successful payment
\f3 \
\ls7\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone UI: Upgrade button that redirects to Stripe Checkout
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Implementation
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // POST /api/billing/checkout
\f3\fs20 \

\f5\fs18 export async function POST(req: Request) \{
\f3\fs20 \

\f5\fs18   const user = await getUser();
\f3\fs20 \

\f5\fs18   if (!user) return Response.json(\{ error: 'Unauthorized' \}, \{ status: 401 \});
\f3\fs20 \
\

\f5\fs18   // Get or create Stripe customer
\f3\fs20 \

\f5\fs18   let subscription = await prisma.subscription.findUnique(\{
\f3\fs20 \

\f5\fs18     where: \{ userId: user.id \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \
\

\f5\fs18   let customerId = subscription?.stripeCustomerId;
\f3\fs20 \

\f5\fs18   if (!customerId) \{
\f3\fs20 \

\f5\fs18     const customer = await stripe.customers.create(\{
\f3\fs20 \

\f5\fs18       email: user.email,
\f3\fs20 \

\f5\fs18       metadata: \{ userId: user.id \}
\f3\fs20 \

\f5\fs18     \});
\f3\fs20 \

\f5\fs18     customerId = customer.id;
\f3\fs20 \
\

\f5\fs18     // Create subscription record (status remains FREE until payment)
\f3\fs20 \

\f5\fs18     subscription = await prisma.subscription.create(\{
\f3\fs20 \

\f5\fs18       data: \{
\f3\fs20 \

\f5\fs18         userId: user.id,
\f3\fs20 \

\f5\fs18         stripeCustomerId: customerId,
\f3\fs20 \

\f5\fs18         status: 'FREE'
\f3\fs20 \

\f5\fs18       \}
\f3\fs20 \

\f5\fs18     \});
\f3\fs20 \

\f5\fs18   \}
\f3\fs20 \
\

\f5\fs18   // Create checkout session
\f3\fs20 \

\f5\fs18   const session = await stripe.checkout.sessions.create(\{
\f3\fs20 \

\f5\fs18     customer: customerId,
\f3\fs20 \

\f5\fs18     mode: 'subscription',
\f3\fs20 \

\f5\fs18     line_items: [\{ price: process.env.STRIPE_PRICE_ID, quantity: 1 \}],
\f3\fs20 \

\f5\fs18     success_url: `$\{process.env.NEXT_PUBLIC_APP_URL\}/billing/success`,
\f3\fs20 \

\f5\fs18     cancel_url: `$\{process.env.NEXT_PUBLIC_APP_URL\}/billing/cancel`,
\f3\fs20 \

\f5\fs18     metadata: \{ userId: user.id \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \
\

\f5\fs18   return Response.json(\{ url: session.url \});
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 UI Requirements
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls8\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Upgrade button/CTA on events page or settings
\f3 \
\ls8\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Button calls /api/billing/checkout, redirects to returned URL
\f3 \
\ls8\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Success page: 'Welcome to Gather! Your subscription is active.'
\f3 \
\ls8\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Cancel page: 'No problem. You can upgrade anytime.'
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls9\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Click upgrade \uc0\u8594  redirected to Stripe Checkout
\f3 \
\ls9\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Complete test payment (card: 4242 4242 4242 4242)
\f3 \
\ls9\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Redirected to success page
\f3 \
\ls9\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Subscription record updated via webhook
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.4 \'97 Billing State Sync + Grace Period\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Backend logic
\fs26 \cf9 \

\fs20 \cf3 Risk: High (billing-critical)
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 4-5 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Implement the webhook handlers that sync Stripe state to local database. This is where billing states (ACTIVE, PAST_DUE, CANCELED) get set. Stripe is source of truth.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls10\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone customer.subscription.created \uc0\u8594  status = ACTIVE (or TRIALING)
\f3 \
\ls10\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone customer.subscription.updated \uc0\u8594  sync status, dates, cancelAtPeriodEnd
\f3 \
\ls10\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone customer.subscription.deleted \uc0\u8594  status = CANCELED
\f3 \
\ls10\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone invoice.paid \uc0\u8594  status = ACTIVE, clear past_due
\f3 \
\ls10\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone invoice.payment_failed \uc0\u8594  status = PAST_DUE
\f3 \
\ls10\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone User.billingStatus always synced with Subscription.status
\f3 \
\ls10\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Grace period: 7 days in PAST_DUE before any action
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 State Mapping
\f3\b0\fs20 \cf3 \

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth3820\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth5180\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f0\b \cf6 Stripe Status
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f0\b\fs20 \cf6 \up0 \nosupersub \ulnone Gather BillingStatus
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth3820\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat6 \clwWidth5180\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone trialing
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone TRIALING
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth3820\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat8 \clwWidth5180\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone active
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone ACTIVE
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth3820\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat6 \clwWidth5180\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone past_due
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone PAST_DUE
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth3820\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat8 \clwWidth5180\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone canceled
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone CANCELED
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth3820\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat6 \clwWidth5180\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone unpaid
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone CANCELED
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth3820\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat8 \clwWidth5180\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone incomplete
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone FREE (no change)
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth3820\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat6 \clwWidth5180\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone incomplete_expired
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone FREE (no change)
\f4\fs24 \cf0 \up0 \nosupersub \ulnone 
\f3\fs20 \cf3 \up0 \nosupersub \ulnone \cell \lastrow\row
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Implementation
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // src/lib/billing/sync.ts
\f3\fs20 \

\f5\fs18 export async function syncSubscriptionFromStripe(
\f3\fs20 \

\f5\fs18   stripeSubscription: Stripe.Subscription
\f3\fs20 \

\f5\fs18 ) \{
\f3\fs20 \

\f5\fs18   const customerId = stripeSubscription.customer as string;
\f3\fs20 \

\f5\fs18   const subscription = await prisma.subscription.findUnique(\{
\f3\fs20 \

\f5\fs18     where: \{ stripeCustomerId: customerId \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \

\f5\fs18   if (!subscription) return;
\f3\fs20 \
\

\f5\fs18   const status = mapStripeStatus(stripeSubscription.status);
\f3\fs20 \
\

\f5\fs18   await prisma.$transaction([
\f3\fs20 \

\f5\fs18     prisma.subscription.update(\{
\f3\fs20 \

\f5\fs18       where: \{ id: subscription.id \},
\f3\fs20 \

\f5\fs18       data: \{
\f3\fs20 \

\f5\fs18         stripeSubscriptionId: stripeSubscription.id,
\f3\fs20 \

\f5\fs18         stripePriceId: stripeSubscription.items.data[0]?.price.id,
\f3\fs20 \

\f5\fs18         status,
\f3\fs20 \

\f5\fs18         currentPeriodStart: new Date(stripeSubscription.current_period_start * 1000),
\f3\fs20 \

\f5\fs18         currentPeriodEnd: new Date(stripeSubscription.current_period_end * 1000),
\f3\fs20 \

\f5\fs18         cancelAtPeriodEnd: stripeSubscription.cancel_at_period_end,
\f3\fs20 \

\f5\fs18       \}
\f3\fs20 \

\f5\fs18     \}),
\f3\fs20 \

\f5\fs18     prisma.user.update(\{
\f3\fs20 \

\f5\fs18       where: \{ id: subscription.userId \},
\f3\fs20 \

\f5\fs18       data: \{ billingStatus: status \}
\f3\fs20 \

\f5\fs18     \})
\f3\fs20 \

\f5\fs18   ]);
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Grace Period Logic
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f2 \cf3 PAST_DUE users retain edit access for 7 days. After 7 days, treat as CANCELED for entitlement purposes. This is checked in the entitlement service (2.5), not here.
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls11\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Stripe CLI: trigger subscription events
\f3 \
\ls11\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Verify local status matches Stripe status
\f3 \
\ls11\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Verify User.billingStatus updates
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.5 \'97 Entitlement Service\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Backend logic
\fs26 \cf9 \

\fs20 \cf3 Risk: Medium
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 3-4 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Create a central entitlement service that answers 'can this user do X?' based on their billing status. All permission checks go through this service.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls12\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Entitlement service at src/lib/entitlements.ts
\f3 \
\ls12\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone canCreateEvent(userId): boolean
\f3 \
\ls12\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone canEditEvent(userId, eventId): boolean
\f3 \
\ls12\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone getEventLimit(userId): number | 'unlimited'
\f3 \
\ls12\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone getRemainingEvents(userId): number | 'unlimited'
\f3 \
\ls12\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Free tier: 1 event per rolling 12 months
\f3 \
\ls12\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Paid/Trial: unlimited events
\f3 \
\ls12\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone PAST_DUE (within 7 days): can edit, cannot create
\f3 \
\ls12\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone CANCELED: read-only
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Implementation
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // src/lib/entitlements.ts
\f3\fs20 \
\

\f5\fs18 export async function canCreateEvent(userId: string): Promise<boolean> \{
\f3\fs20 \

\f5\fs18   const user = await prisma.user.findUnique(\{
\f3\fs20 \

\f5\fs18     where: \{ id: userId \},
\f3\fs20 \

\f5\fs18     include: \{ subscription: true \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \

\f5\fs18   if (!user) return false;
\f3\fs20 \
\

\f5\fs18   const status = user.billingStatus;
\f3\fs20 \
\

\f5\fs18   // Paid or trialing: unlimited
\f3\fs20 \

\f5\fs18   if (status === 'ACTIVE' || status === 'TRIALING') return true;
\f3\fs20 \
\

\f5\fs18   // Past due within grace period: no new events
\f3\fs20 \

\f5\fs18   if (status === 'PAST_DUE') return false;
\f3\fs20 \
\

\f5\fs18   // Canceled: no new events
\f3\fs20 \

\f5\fs18   if (status === 'CANCELED') return false;
\f3\fs20 \
\

\f5\fs18   // Free: check 1 event per 12 months
\f3\fs20 \

\f5\fs18   const twelveMonthsAgo = new Date();
\f3\fs20 \

\f5\fs18   twelveMonthsAgo.setMonth(twelveMonthsAgo.getMonth() - 12);
\f3\fs20 \
\

\f5\fs18   const recentEventCount = await prisma.eventRole.count(\{
\f3\fs20 \

\f5\fs18     where: \{
\f3\fs20 \

\f5\fs18       userId,
\f3\fs20 \

\f5\fs18       role: 'HOST',
\f3\fs20 \

\f5\fs18       event: \{
\f3\fs20 \

\f5\fs18         createdAt: \{ gte: twelveMonthsAgo \},
\f3\fs20 \

\f5\fs18         isLegacy: \{ not: true \}  // Don't count grandfathered events
\f3\fs20 \

\f5\fs18       \}
\f3\fs20 \

\f5\fs18     \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \
\

\f5\fs18   return recentEventCount < 1;
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\

\f5\fs18 export async function canEditEvent(userId: string, eventId: string): Promise<boolean> \{
\f3\fs20 \

\f5\fs18   const user = await prisma.user.findUnique(\{ where: \{ id: userId \} \});
\f3\fs20 \

\f5\fs18   if (!user) return false;
\f3\fs20 \
\

\f5\fs18   // Check user has role on this event
\f3\fs20 \

\f5\fs18   const role = await prisma.eventRole.findUnique(\{
\f3\fs20 \

\f5\fs18     where: \{ userId_eventId: \{ userId, eventId \} \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \

\f5\fs18   if (!role) return false;
\f3\fs20 \
\

\f5\fs18   // Canceled: read-only
\f3\fs20 \

\f5\fs18   if (user.billingStatus === 'CANCELED') return false;
\f3\fs20 \
\

\f5\fs18   // Past due beyond 7 days: read-only
\f3\fs20 \

\f5\fs18   if (user.billingStatus === 'PAST_DUE') \{
\f3\fs20 \

\f5\fs18     const sub = await prisma.subscription.findUnique(\{ where: \{ userId \} \});
\f3\fs20 \

\f5\fs18     if (sub && sub.updatedAt) \{
\f3\fs20 \

\f5\fs18       const daysSincePastDue = (Date.now() - sub.updatedAt.getTime()) / (1000*60*60*24);
\f3\fs20 \

\f5\fs18       if (daysSincePastDue > 7) return false;
\f3\fs20 \

\f5\fs18     \}
\f3\fs20 \

\f5\fs18   \}
\f3\fs20 \
\

\f5\fs18   return true;
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls13\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Unit tests for each billing status scenario
\f3 \
\ls13\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Free user with 0 events \uc0\u8594  canCreateEvent = true
\f3 \
\ls13\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Free user with 1 recent event \uc0\u8594  canCreateEvent = false
\f3 \
\ls13\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Paid user \uc0\u8594  canCreateEvent = true always
\f3 \
\ls13\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Canceled user \uc0\u8594  canEditEvent = false
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.6 \'97 Event Creation Gate\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Backend + UI
\fs26 \cf9 \

\fs20 \cf3 Risk: Medium
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 2-3 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Enforce entitlements at the event creation boundary. If user cannot create an event, show upgrade prompt instead.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls14\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone POST /api/events checks canCreateEvent before creating
\f3 \
\ls14\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone If not allowed: return 403 with reason
\f3 \
\ls14\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Event creation UI checks entitlement before showing form
\f3 \
\ls14\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone If not allowed: show upgrade CTA instead of create button
\f3 \
\ls14\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone New events get isLegacy: false flag
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Schema Addition
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // Add to Event model
\f3\fs20 \

\f5\fs18 model Event \{
\f3\fs20 \

\f5\fs18   // ... existing fields
\f3\fs20 \

\f5\fs18   isLegacy  Boolean  @default(false)  // True for pre-monetisation events
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 API Implementation
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // POST /api/events
\f3\fs20 \

\f5\fs18 export async function POST(req: Request) \{
\f3\fs20 \

\f5\fs18   const user = await getUser();
\f3\fs20 \

\f5\fs18   if (!user) return Response.json(\{ error: 'Unauthorized' \}, \{ status: 401 \});
\f3\fs20 \
\

\f5\fs18   const allowed = await canCreateEvent(user.id);
\f3\fs20 \

\f5\fs18   if (!allowed) \{
\f3\fs20 \

\f5\fs18     return Response.json(\{
\f3\fs20 \

\f5\fs18       error: 'Event limit reached',
\f3\fs20 \

\f5\fs18       reason: 'FREE_LIMIT',
\f3\fs20 \

\f5\fs18       upgradeUrl: '/billing/upgrade'
\f3\fs20 \

\f5\fs18     \}, \{ status: 403 \});
\f3\fs20 \

\f5\fs18   \}
\f3\fs20 \
\

\f5\fs18   // ... existing event creation logic
\f3\fs20 \

\f5\fs18   // Set isLegacy: false for new events
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 UI Requirements
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls15\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Check entitlement on page load for /plan/new
\f3 \
\ls15\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone If blocked: show message + upgrade button
\f3 \
\ls15\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Message: 'You've used your free event this year. Upgrade for unlimited gatherings.'
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls16\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Free user creates first event \uc0\u8594  success
\f3 \
\ls16\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Free user tries second event \uc0\u8594  blocked with upgrade prompt
\f3 \
\ls16\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Paid user creates unlimited events \uc0\u8594  success
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.7 \'97 Phone Verification for Trial\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Feature
\fs26 \cf9 \

\fs20 \cf3 Risk: Medium (external dependency)
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 3-4 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Trials require phone verification to prevent abuse (one trial per phone number). Use Twilio Verify or similar service.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls17\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone PhoneVerification table to track verified numbers
\f3 \
\ls17\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone POST /api/auth/phone/send \'97 sends verification code
\f3 \
\ls17\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone POST /api/auth/phone/verify \'97 validates code
\f3 \
\ls17\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone One trial per verified phone number
\f3 \
\ls17\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Phone stored on User record after verification
\f3 \
\ls17\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone UI: Phone input + verification code flow
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Schema Addition
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 model User \{
\f3\fs20 \

\f5\fs18   // ... existing fields
\f3\fs20 \

\f5\fs18   phone          String?   @unique
\f3\fs20 \

\f5\fs18   phoneVerified  Boolean   @default(false)
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\

\f5\fs18 model PhoneVerification \{
\f3\fs20 \

\f5\fs18   id        String   @id @default(cuid())
\f3\fs20 \

\f5\fs18   phone     String
\f3\fs20 \

\f5\fs18   code      String
\f3\fs20 \

\f5\fs18   expiresAt DateTime
\f3\fs20 \

\f5\fs18   usedAt    DateTime?
\f3\fs20 \

\f5\fs18   createdAt DateTime @default(now())
\f3\fs20 \
\

\f5\fs18   @@index([phone])
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Implementation Notes
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls18\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Use Twilio Verify API (or alternative: MessageBird, Vonage)
\f3 \
\ls18\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Rate limit: 3 codes per phone per hour
\f3 \
\ls18\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Code expiry: 10 minutes
\f3 \
\ls18\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Before starting trial, check phone not already used for another user's trial
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls19\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Enter phone \uc0\u8594  receive SMS code
\f3 \
\ls19\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Enter code \uc0\u8594  phone verified
\f3 \
\ls19\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Same phone cannot start another trial (different account)
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.8 \'97 Trial Flow\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Feature
\fs26 \cf9 \

\fs20 \cf3 Risk: Medium
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 4-5 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Implement the 14-day trial that starts on first event creation. Requires phone verification. Trial users get paid entitlements.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls20\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial starts when: user creates first event + phone verified
\f3 \
\ls20\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial duration: 14 days
\f3 \
\ls20\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial users: billingStatus = TRIALING
\f3 \
\ls20\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial users: unlimited event creation
\f3 \
\ls20\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial end without conversion: status \uc0\u8594  FREE, events \u8594  read-only
\f3 \
\ls20\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial events don't count against free meter
\f3 \
\ls20\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone UI: Trial banner showing days remaining
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Flow
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f2 \cf3 1. User on FREE creates event
\f3 \

\f2 2. If phone not verified \uc0\u8594  prompt phone verification
\f3 \

\f2 3. After phone verified \uc0\u8594  start trial (14 days)
\f3 \

\f2 4. User.billingStatus = TRIALING
\f3 \

\f2 5. Subscription.trialStart = now, trialEnd = now + 14 days
\f3 \

\f2 6. User can create unlimited events during trial
\f3 \

\f2 7. Day 12: Email reminder 'Trial ending soon'
\f3 \

\f2 8. Day 14: If not converted \uc0\u8594  billingStatus = FREE
\f3 \

\f2 9. Trial events become read-only
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Schema Addition
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 model Event \{
\f3\fs20 \

\f5\fs18   // ... existing fields
\f3\fs20 \

\f5\fs18   isTrialEvent  Boolean  @default(false)  // Created during trial
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Trial Expiry Job
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f2 \cf3 Need a scheduled job (cron or Vercel cron) to check for expired trials:
\f3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // Run daily
\f3\fs20 \

\f5\fs18 const expiredTrials = await prisma.subscription.findMany(\{
\f3\fs20 \

\f5\fs18   where: \{
\f3\fs20 \

\f5\fs18     status: 'TRIALING',
\f3\fs20 \

\f5\fs18     trialEnd: \{ lt: new Date() \}
\f3\fs20 \

\f5\fs18   \}
\f3\fs20 \

\f5\fs18 \});
\f3\fs20 \
\

\f5\fs18 for (const sub of expiredTrials) \{
\f3\fs20 \

\f5\fs18   await prisma.$transaction([
\f3\fs20 \

\f5\fs18     prisma.subscription.update(\{
\f3\fs20 \

\f5\fs18       where: \{ id: sub.id \},
\f3\fs20 \

\f5\fs18       data: \{ status: 'FREE' \}
\f3\fs20 \

\f5\fs18     \}),
\f3\fs20 \

\f5\fs18     prisma.user.update(\{
\f3\fs20 \

\f5\fs18       where: \{ id: sub.userId \},
\f3\fs20 \

\f5\fs18       data: \{ billingStatus: 'FREE' \}
\f3\fs20 \

\f5\fs18     \})
\f3\fs20 \

\f5\fs18   ]);
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls21\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Free user + verified phone + create event \uc0\u8594  trial starts
\f3 \
\ls21\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial user can create multiple events
\f3 \
\ls21\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone After 14 days \uc0\u8594  status = FREE
\f3 \
\ls21\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial events become read-only after expiry
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.9 \'97 Cancellation + Downgrade Handling\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Backend + UI
\fs26 \cf9 \

\fs20 \cf3 Risk: Medium
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 3-4 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Handle subscription cancellation gracefully. User keeps access until period end, then becomes read-only. Must be able to resubscribe.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls22\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone POST /api/billing/cancel \'97 sets cancelAtPeriodEnd = true in Stripe
\f3 \
\ls22\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone User retains ACTIVE status until currentPeriodEnd
\f3 \
\ls22\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone At period end: status \uc0\u8594  CANCELED (via webhook)
\f3 \
\ls22\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone CANCELED users: all events become read-only
\f3 \
\ls22\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone CANCELED users: can resubscribe via normal checkout
\f3 \
\ls22\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone UI: Cancel button in billing settings
\f3 \
\ls22\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone UI: Resubscribe button for canceled users
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Implementation
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // POST /api/billing/cancel
\f3\fs20 \

\f5\fs18 export async function POST(req: Request) \{
\f3\fs20 \

\f5\fs18   const user = await getUser();
\f3\fs20 \

\f5\fs18   if (!user) return Response.json(\{ error: 'Unauthorized' \}, \{ status: 401 \});
\f3\fs20 \
\

\f5\fs18   const subscription = await prisma.subscription.findUnique(\{
\f3\fs20 \

\f5\fs18     where: \{ userId: user.id \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \
\

\f5\fs18   if (!subscription?.stripeSubscriptionId) \{
\f3\fs20 \

\f5\fs18     return Response.json(\{ error: 'No active subscription' \}, \{ status: 400 \});
\f3\fs20 \

\f5\fs18   \}
\f3\fs20 \
\

\f5\fs18   // Cancel at period end (not immediate)
\f3\fs20 \

\f5\fs18   await stripe.subscriptions.update(subscription.stripeSubscriptionId, \{
\f3\fs20 \

\f5\fs18     cancel_at_period_end: true
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \
\

\f5\fs18   // Local update (webhook will also fire)
\f3\fs20 \

\f5\fs18   await prisma.subscription.update(\{
\f3\fs20 \

\f5\fs18     where: \{ id: subscription.id \},
\f3\fs20 \

\f5\fs18     data: \{ cancelAtPeriodEnd: true \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \
\

\f5\fs18   return Response.json(\{ ok: true \});
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 UI Requirements
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls23\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Billing page shows current status and period end date
\f3 \
\ls23\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone If cancelAtPeriodEnd: show 'Your subscription ends on [date]'
\f3 \
\ls23\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Cancel button with confirmation dialog
\f3 \
\ls23\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone After canceled: show resubscribe CTA
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls24\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Cancel subscription \uc0\u8594  cancelAtPeriodEnd = true
\f3 \
\ls24\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone User retains access until period end
\f3 \
\ls24\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone After period end \uc0\u8594  status = CANCELED \u8594  read-only
\f3 \
\ls24\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Resubscribe \uc0\u8594  new subscription \u8594  ACTIVE
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.10 \'97 Legacy Event Grandfathering\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Data migration + logic
\fs26 \cf9 \

\fs20 \cf3 Risk: Medium
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 2-3 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Events created before monetisation launch are 'legacy' and don't count against free tier limits. They remain fully editable regardless of billing status.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls25\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Migration script marks all existing events as isLegacy: true
\f3 \
\ls25\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Legacy events excluded from free tier event count
\f3 \
\ls25\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Legacy events remain editable even if user is FREE
\f3 \
\ls25\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Legacy events remain editable even if user is CANCELED
\f3 \
\ls25\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone New events after migration: isLegacy: false
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Migration Script
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // scripts/mark-legacy-events.ts
\f3\fs20 \

\f5\fs18 import \{ prisma \} from '../src/lib/prisma';
\f3\fs20 \
\

\f5\fs18 async function markLegacyEvents() \{
\f3\fs20 \

\f5\fs18   const result = await prisma.event.updateMany(\{
\f3\fs20 \

\f5\fs18     where: \{ isLegacy: false \},  // or where isLegacy is null
\f3\fs20 \

\f5\fs18     data: \{ isLegacy: true \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \
\

\f5\fs18   console.log(`Marked $\{result.count\} events as legacy`);
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\

\f5\fs18 markLegacyEvents();
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Entitlement Update
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // In canEditEvent, add legacy check:
\f3\fs20 \

\f5\fs18 const event = await prisma.event.findUnique(\{ where: \{ id: eventId \} \});
\f3\fs20 \

\f5\fs18 if (event?.isLegacy) return true;  // Legacy events always editable
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Verification
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls26\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Run migration \uc0\u8594  all existing events marked legacy
\f3 \
\ls26\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Create new event \uc0\u8594  isLegacy = false
\f3 \
\ls26\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Free user can edit legacy events
\f3 \
\ls26\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Legacy events don't count toward free limit
\f3 \
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.11 \'97 Billing UI (Manage Subscription)\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: UI
\fs26 \cf9 \

\fs20 \cf3 Risk: Low
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 3-4 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Create a billing management page where users can see their subscription status, upgrade, cancel, or update payment method.
\fs26 \cf9 \
\pard\sa150\partightenfactor0

\fs22 \cf5 Acceptance Criteria
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls27\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Billing page at /settings/billing (or /billing)
\f3 \
\ls27\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Shows current plan: Free, Trial (X days left), or Annual
\f3 \
\ls27\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Shows billing status: Active, Past Due, Canceled
\f3 \
\ls27\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Shows next billing date (if applicable)
\f3 \
\ls27\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Upgrade button (for Free users)
\f3 \
\ls27\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Cancel button (for paid users)
\f3 \
\ls27\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Update payment method link (Stripe Customer Portal)
\f3 \
\ls27\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Resubscribe button (for canceled users)
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Implementation
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // GET /api/billing/status
\f3\fs20 \

\f5\fs18 export async function GET(req: Request) \{
\f3\fs20 \

\f5\fs18   const user = await getUser();
\f3\fs20 \

\f5\fs18   if (!user) return Response.json(\{ error: 'Unauthorized' \}, \{ status: 401 \});
\f3\fs20 \
\

\f5\fs18   const subscription = await prisma.subscription.findUnique(\{
\f3\fs20 \

\f5\fs18     where: \{ userId: user.id \}
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \
\

\f5\fs18   return Response.json(\{
\f3\fs20 \

\f5\fs18     billingStatus: user.billingStatus,
\f3\fs20 \

\f5\fs18     currentPeriodEnd: subscription?.currentPeriodEnd,
\f3\fs20 \

\f5\fs18     cancelAtPeriodEnd: subscription?.cancelAtPeriodEnd,
\f3\fs20 \

\f5\fs18     trialEnd: subscription?.trialEnd,
\f3\fs20 \

\f5\fs18   \});
\f3\fs20 \

\f5\fs18 \}
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Customer Portal
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f5\fs18 \cf3 // POST /api/billing/portal
\f3\fs20 \

\f5\fs18 // Creates Stripe Customer Portal session for payment method updates
\f3\fs20 \

\f5\fs18 const session = await stripe.billingPortal.sessions.create(\{
\f3\fs20 \

\f5\fs18   customer: subscription.stripeCustomerId,
\f3\fs20 \

\f5\fs18   return_url: `$\{process.env.NEXT_PUBLIC_APP_URL\}/settings/billing`,
\f3\fs20 \

\f5\fs18 \});
\f3\fs20 \

\f5\fs18 return Response.json(\{ url: session.url \});
\f3\fs20 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 UI States
\f3\b0\fs20 \cf3 \

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth2320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat2 \clwWidth6680\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f0\b \cf6 Status
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f0\b\fs20 \cf6 \up0 \nosupersub \ulnone UI Display
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth2320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat6 \clwWidth6680\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone FREE
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 'Free Plan - 1 event/year' + Upgrade button
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth2320\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat8 \clwWidth6680\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone TRIALING
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 'Trial - X days remaining' + Subscribe button
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth2320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat6 \clwWidth6680\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone ACTIVE
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 'Annual Plan' + next billing date + Cancel button
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth2320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat8 \clwWidth6680\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone ACTIVE + cancel
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 'Cancels on [date]' + Resubscribe button
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth2320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat6 \clwWidth6680\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone PAST_DUE
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 'Payment failed' + Update payment button
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth2320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx4320
\clvertalt \clcbpat8 \clwWidth6680\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone CANCELED
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone 'Subscription ended' + Resubscribe button
\f4\fs24 \cf0 \up0 \nosupersub \ulnone 
\f3\fs20 \cf3 \up0 \nosupersub \ulnone \cell \lastrow\row
\pard\sa350\partightenfactor0
\cf3 \page \pard\sa350\partightenfactor0

\f0\b\fs26 \cf9 Ticket 2.12 \'97 Phase 2 Validation\
\pard\sa350\partightenfactor0

\fs20 \cf3 Type: Testing + Validation
\fs26 \cf9 \

\fs20 \cf3 Risk: Low
\fs26 \cf9 \

\fs20 \cf3 Estimated effort: 4-5 hours
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Context
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs20 \cf3 Validate that all Phase 2 functionality works correctly and that Phase 1 functionality is unaffected.
\fs26 \cf9 \
\pard\sa350\partightenfactor0

\fs22 \cf5 Test Matrix
\fs26 \cf9 \

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrt\brdrnil \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat2 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat2 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat2 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\fs20 \cf6 Scenario
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f0\b\fs20 \cf6 \up0 \nosupersub \ulnone Expected
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f0\b\fs20 \cf6 \up0 \nosupersub \ulnone Status
\f4\b0\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Free user creates first event
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Success
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Free user creates second event
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Blocked + upgrade
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Free user upgrades via checkout
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Status = ACTIVE
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Paid user creates unlimited events
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Success
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Paid user cancels subscription
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone cancelAtPeriodEnd
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Canceled user at period end
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Status = CANCELED
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Canceled user tries to edit
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Read-only
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Canceled user resubscribes
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Status = ACTIVE
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Payment fails
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Status = PAST_DUE
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Past due user tries to create
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Blocked
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Past due user tries to edit
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Allowed (7 day grace)
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Past due > 7 days tries to edit
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Blocked
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Trial starts on first event + phone
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Status = TRIALING
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Trial user creates events
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Unlimited
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Trial expires without conversion
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Status = FREE
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Trial events after expiry
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Read-only
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight180 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Legacy event edit (any status)
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Allowed
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Legacy events don't count
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Free limit unaffected
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat6 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat6 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat6 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Phone verification flow
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Code sent + verified
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell \row

\itap1\trowd \taflags1 \trgaph108\trleft-108 \trbrdrl\brdrnil \trbrdrt\brdrnil \trbrdrr\brdrnil 
\clvertalt \clcbpat8 \clwWidth5320\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx2880
\clvertalt \clcbpat8 \clwWidth2220\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx5760
\clvertalt \clcbpat8 \clwWidth1280\clftsWidth3 \clheight200 \clbrdrt\brdrs\brdrw20\brdrcf7 \clbrdrl\brdrs\brdrw20\brdrcf7 \clbrdrb\brdrs\brdrw20\brdrcf7 \clbrdrr\brdrs\brdrw20\brdrcf7 \clpadt80 \clpadl80 \clpadb80 \clpadr80 \gaph\cellx8640
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Same phone second trial
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone Blocked
\f4\fs24 \cf0 \up0 \nosupersub \ulnone \cell 
\pard\intbl\itap1\pardeftab720\sl288\slmult1\partightenfactor0

\f2\fs20 \cf3 \up0 \nosupersub \ulnone [ ]
\f4\fs24 \cf0 \up0 \nosupersub \ulnone 
\f0\b\fs26 \cf9 \up0 \nosupersub \ulnone \cell \lastrow\row
\pard\sa150\partightenfactor0

\fs22 \cf5 Phase 1 Regression Checks
\fs26 \cf9 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls28\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Magic link sign-in still works
\f3 \
\ls28\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Legacy host tokens still work
\f3 \
\ls28\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Coordinator tokens still work
\f3 \
\ls28\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Participant tokens still work
\f3 \
\ls28\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Host claim flow still works
\f3 \
\ls28\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Session/logout still works
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Stripe Test Cards
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls29\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Success: 4242 4242 4242 4242
\f3 \
\ls29\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Decline: 4000 0000 0000 0002
\f3 \
\ls29\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Requires auth: 4000 0025 0000 3155
\f3 \
\ls29\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Insufficient funds: 4000 0000 0000 9995
\f3 \
\pard\sa400\partightenfactor0
\cf3 \page \pard\sa400\partightenfactor0

\f0\b\fs32 \cf2 Phase 2 Summary\
\pard\sa200\partightenfactor0

\fs22 \cf5 What This Delivers
\fs32 \cf2 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls30\ilvl0
\f3\b0\fs20 \cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Stripe subscription billing (annual)
\f3 \
\ls30\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Billing states: FREE, TRIALING, ACTIVE, PAST_DUE, CANCELED
\f3 \
\ls30\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Entitlement enforcement (event creation limits)
\f3 \
\ls30\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone 14-day trial with phone verification
\f3 \
\ls30\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone 7-day grace period for failed payments
\f3 \
\ls30\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Cancellation with end-of-period access
\f3 \
\ls30\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Legacy event grandfathering
\f3 \
\ls30\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Billing management UI
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 What This Does NOT Deliver
\f3\b0\fs20 \cf3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls31\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Co-host invitation flow (Phase 3)
\f3 \
\ls31\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Coordinator invitation flow (Phase 3)
\f3 \
\ls31\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Multiple admin seats management (Phase 3)
\f3 \
\ls31\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Refund automation (manual via Stripe Dashboard)
\f3 \
\ls31\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Dunning emails (use Stripe's built-in)
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Architecture Alignment
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f2 \cf3 This implementation matches the locked architecture spec:
\f3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls32\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Host pays via subscription; plan sets event limit
\f3 \
\ls32\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Free: 1 event per rolling 12 months
\f3 \
\ls32\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Paid: unlimited events
\f3 \
\ls32\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Trial: 14 days, phone verified, starts on first event
\f3 \
\ls32\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Grace: 7 days for past_due
\f3 \
\ls32\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Cancel: access until period end, then read-only
\f3 \
\ls32\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Legacy events: always editable, don't count against limit
\f3 \
\pard\sa40\partightenfactor0

\f0\b\fs22 \cf5 Pricing Decision Required
\f3\b0\fs20 \cf3 \
\pard\sa40\partightenfactor0

\f2 \cf3 Before launching, set your price in Stripe Dashboard. Suggested starting point for Western market:
\f3 \
\pard\tx360\tx720\li720\fi-720\sa40\partightenfactor0
\ls33\ilvl0\cf3 \up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone $49/year (approx $4/month) \'97 accessible, annual commitment
\f3 \
\ls33\ilvl0\up0 \nosupersub \ulnone {\listtext	\uc0\u8226 	}
\f2 \up0 \nosupersub \ulnone Or $79/year \'97 higher value positioning
\f3 \
\pard\sa40\partightenfactor0

\f2 \cf3 The price is configured in Stripe, not in code. You can change it anytime.
\f3 \
\
\pard\sa40\partightenfactor0

\f6\i\fs18 \cf10 Generated from Gather Monetisation + Auth Architecture spec}